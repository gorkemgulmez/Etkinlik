@using Etkinlik.Models
@model SurveyModel

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />

    <link href="~/css/StyleSheet.css" rel="stylesheet" type="text/css" />

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    <title>Diger</title>
    <script>

        $(function () {

            $(document).on('focus', 'div.form-group-options div.input-group-option:last-child input', function () {

                var sInputGroupHtml = $(this).parent().html();
                var sInputGroupClasses = $(this).parent().attr('class');
                $(this).parent().parent().append('<div class="' + sInputGroupClasses + '">' + sInputGroupHtml + '</div>');

            });

            $(document).on('click', 'div.form-group-options .input-group-addon-remove', function () {

                $(this).parent().remove();

            });

        });


        $(function () {

            var values = new Array();

            $(document).on('change', '.form-group-multiple-selects .input-group-multiple-select:last-child select', function () {

                var selectsLength = $(this).parent().parent().find('.input-group-multiple-select select').length;
                var optionsLength = ($(this).find('option').length) - 1;

                if (selectsLength < optionsLength) {
                    var sInputGroupHtml = $(this).parent().html();
                    var sInputGroupClasses = $(this).parent().attr('class');
                    $(this).parent().parent().append('<div class="' + sInputGroupClasses + '">' + sInputGroupHtml + '</div>');
                }

                updateValues($(this).parent().parent());

            });

            $(document).on('change', '.form-group-multiple-selects .input-group-multiple-select:not(:last-child) select', function () {

                updateValues($(this).parent().parent());

            });

            $(document).on('click', '.input-group-addon-remove', function () {

                var oSelectContainer = $(this).parent().parent()
                $(this).parent().remove();
                updateValues(oSelectContainer);

            });

            function updateValues(oSelectContainer) {

                values = new Array();
                $(oSelectContainer).find('.input-group-multiple-select select').each(function () {
                    var value = $(this).val();
                    if (value != 0 && value != "") {
                        values.push(value);
                    }
                });

                $(oSelectContainer).find('.input-group-multiple-select select').find('option').each(function () {
                    var optionValue = $(this).val();
                    var selectValue = $(this).parent().val();
                    if (in_array(optionValue, values) != -1 && selectValue != optionValue) {
                        $(this).attr('disabled', 'disabled');
                    }
                    else {
                        $(this).removeAttr('disabled');
                    }
                });

            }

            function in_array(needle, haystack) {

                var found = 0;
                for (var i = 0, length = haystack.length; i < length; i++) {
                    if (haystack[i] == needle) return i;
                    found++;
                }
                return -1;

            }

            $('.form-group-multiple-selects').each(function (i, e) {

                updateValues(e);

            });

        });
    </script>
</head>

<body>
    <section>
        @using (Html.BeginForm())
        {
            <fieldset>

                <div class="container" style="margin-top:40px">
                    <div class="row">

                        <div class="col-sm-6 col-md-4 col-md-offset-4">
                            <div class="panel panel-default">
                                <div class="heading">
                                    <center>
                                        <strong style="color:white">Aktivite Ekleme</strong>
                                    </center>
                                    <hr>
                                </div>
                                <div class="panel-body">

                                    <div class="col-sm-12 col-md-10  col-md-offset-1 ">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <label>Anket Name</label>
                                                <input asp-for="SurveyTitle" class="form-control" type="text" placeholder="Enter Survey Title" />
                                            </div>
                                            <span asp-validation-for="SurveyTitle" class="text-danger"></span>
                                        </div>
                                    </div>


                                    <div class="col-sm-12 col-md-10  col-md-offset-1 ">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <label> Anket Detail</label>


                                                <input asp-for="SurveyChoiceModel[0].ChoiceName" name="option[]" class="form-control" type="text" placeholder="Enter Survey Choicename" />
                                            </div>
                                            <span asp-validation-for="SurveyChoiceModel" class="text-danger"></span>
                                        </div>
                                    </div>


                                    <div class="col-sm-12 col-md-10  col-md-offset-1 ">
                                        <div class="form-group">
                                            <div class="input-group">
                                                <button type="submit" class="btn btn-default">Add Survey</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div></div>

                    <div class="navbar navbar-fixed-bottom">
                        <footer>
                            <p>&nbsp;&copy; 2018 - Etkinlik</p>
                        </footer>
                    </div>
               
            </fieldset>
        }
    </section>
</body>
</html>

